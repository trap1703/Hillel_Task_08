Домашнее задание 7
Добавлено: 16.12.2019 19:28
Test-driven development
Вам предстоит реализовать test-driven development вашего кукбука.

Если вы уже сконфигурировали свои Workstations, Chef Server и Chef Client, это сделать довольно просто:

напишите свой собственный .kitchen.yaml файл со suite для вашей платформы (рек. ubuntu/centos), verifier: inspec, в конфиге используйте локальный путь к вашему Inspec profile
перед написанием кукбука, создайте Inspec profile, в котором опишите желаемое состояние вашей инфраструктуры (предлагаю реализовать то же самое, что и делали во втором задании по Ansible, но дополнительное требование -- создайте несколько sudoers users, с помощью ресурса user в ЦИКЛЕ FOR, который будет итерировать по списку пользователей, и уникальных GID для них (должны начинаться с 10001, принадлежать разным группам), то же самое касается его sudoers config: /etc/sudoers.d/#{username}.). не пропустите ничего! (состояния сервисов, установленных пакетов, даже порты и права на файлы и директории!)
реализуйте кукбук с дополнительным требованием из предыдущего пункта
запуском kitchen test должно отработать все - создание, конверж, тесты и удаление виртуалки.
